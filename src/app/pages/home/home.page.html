<app-weather-header
  [citySearch]="citySearch"
  (citySearchChange)="citySearch = $event"
  [loadingLocation]="loadingLocation"
  [currentLang]="currentLang"
  [showSuggestions]="showSuggestions"
  [citySuggestions]="citySuggestions"
  (search)="searchCity()"
  (searchInput)="onSearchInput($event)"
  (requestLocation)="getCurrentLocation()"
  (toggleLang)="toggleLanguage()"
  (citySortSelected)="selectCity($event)"
></app-weather-header>

<ion-content [fullscreen]="true">
  <!-- Suggestions Dropdown (Floating) -->
  @if (weatherData) {
  <div class="main-container ion-padding">
    <ion-grid>
      <ion-row class="desktop-split">
        <!-- LEFT COLUMN: Hero & Current Details (Center/Left on Desktop) -->
        <ion-col size-xs="12" size-md="5" size-lg="5" class="left-col">
          <!-- HERO SECTION -->
          <app-current-weather
            [displayDate]="displayDate"
            [currentLang]="currentLang"
            [locationName]="weatherData.current.name || (citySearch | uppercase)"
            [temp]="weatherData.current.temp"
            [tempMax]="weatherData.daily[0].temp.max"
            [tempMin]="weatherData.daily[0].temp.min"
            [iconCode]="weatherData.current.weather[0].icon"
            [description]="weatherData.current.weather[0].description"
          ></app-current-weather>

          <!-- DETAILS GRID -->
          <app-weather-details-grid
            [current]="weatherData.current"
            [currentUnit]="currentUnit"
          ></app-weather-details-grid>
        </ion-col>

        <!-- RIGHT COLUMN: Timeline & Forecast (Right on Desktop) -->
        <ion-col
          size-xs="12"
          size-md="7"
          size-lg="6"
          offset-lg="1"
          class="right-col"
        >
          <!-- SECTIONS -->
          <div class="section-title">
            <span>{{ 'HOME.TIMELINE' | translate }}</span>
          </div>

          <!-- HOURLY -->
          <app-hourly-breakdown
            [hourlyForecast]="weatherData.hourly | slice:0:8"
          ></app-hourly-breakdown>

          <div class="section-title ion-margin-top">
            <span>{{ 'HOME.FORECAST_TITLE' | translate }}</span>
          </div>

          <app-forecast-list
            [dailyForecast]="weatherData.daily | slice:0:5"
            [selectedDayId]="selectedDayId"
            (daySelected)="onDaySelected($event)"
          ></app-forecast-list>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
  } @else {
  <div class="ion-text-center ion-padding loading-container">
    <p class="loading-text">{{ 'HOME.LOADING' | translate }}</p>
    <ion-spinner color="light"></ion-spinner>
  </div>
  }
</ion-content>
